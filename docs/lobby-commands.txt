# Raptor Progression â€” Lobby Commands
# Paste these into BAR lobby chat after !boss
# ==========================================

# --- Lobby Setup ---
!rename Raptor Unit Focused
!map Full Metal Plate

# --- Modoptions ---
!bset raptor_raptorstart alwaysbox
!bset raptor_endless 0
!bset raptor_queencount 1
!bset raptor_queenhatchtimemult 0.7
!bset raptor_graceperiodmult 0.8
!bset raptor_wavefrequencymult 1.3
!bset raptor_unitspawnmult 1.2
!bset raptor_difficulty normal
!bset startmetal 1500
!bset startenergy 1500
!bset startmetalstorage 1500
!bset startenergystorage 1500
!bset startoptions_startpos chooseinlobby

# --- Tweakdefs & Tweakunits ---
!bset tweakdefs LS0gUmFwdG9yIFByb2dyZXNzaW9uOiBDb3JlIFJhcHRvciBUaWVyIFNjYWxpbmcgKFNsb3QgMCkKLS0gVDEtPlQyLT5UMy0-VDQgcG93ZXIgY3VydmUgd2l0aCBmYXN0IDMwLTQwIG1pbiBwYWNpbmcKCmRvCiAgICBsb2NhbCB1bml0RGVmcyA9IFVuaXREZWZzIG9yIHt9CgogICAgLS0gUmFwdG9yIHRpZXIgY2xhc3NpZmljYXRpb24gYnkgdW5pdCBuYW1lIHBhdHRlcm5zCiAgICBsb2NhbCBmdW5jdGlvbiBnZXRSYXB0b3JUaWVyKG5hbWUpCiAgICAgICAgLS0gVDQ6IGFwZXggLyBiZWhlbW90aCAvIGxldmlhdGhhbgogICAgICAgIGlmIG5hbWU6bWF0Y2goIl90NF8iKSBvciBuYW1lOm1hdGNoKCJhcGV4Iikgb3IgbmFtZTptYXRjaCgiYmVoZW1vdGgiKSBvciBuYW1lOm1hdGNoKCJsZXZpYXRoYW4iKSB0aGVuCiAgICAgICAgICAgIHJldHVybiA0CiAgICAgICAgZW5kCiAgICAgICAgLS0gVDM6IGFzc2F1bHQgLyBvdmVyc2VlciAvIGFkdmFuY2VkIHZhcmlhbnRzCiAgICAgICAgaWYgbmFtZTptYXRjaCgiX3QzXyIpIG9yIG5hbWU6bWF0Y2goImFzc2F1bHQiKSBvciBuYW1lOm1hdGNoKCJvdmVyc2VlciIpCiAgICAgICAgICAgb3IgbmFtZTptYXRjaCgiYWR2YW5jZWQiKSBvciBuYW1lOm1hdGNoKCJzdGFsa2VyIikgb3IgbmFtZTptYXRjaCgiZGVtb2xpc2hlciIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIDMKICAgICAgICBlbmQKICAgICAgICAtLSBUMjogd2FycmlvciAvIGh1bnRlciAvIG1pZC10aWVyCiAgICAgICAgaWYgbmFtZTptYXRjaCgiX3QyXyIpIG9yIG5hbWU6bWF0Y2goIndhcnJpb3IiKSBvciBuYW1lOm1hdGNoKCJodW50ZXIiKSBvciBuYW1lOm1hdGNoKCJyYWlkZXIiKQogICAgICAgICAgIG9yIG5hbWU6bWF0Y2goImd1YXJkaWFuIikgb3IgbmFtZTptYXRjaCgic3Bpa2VyIikgdGhlbgogICAgICAgICAgICByZXR1cm4gMgogICAgICAgIGVuZAogICAgICAgIC0tIFQxOiBldmVyeXRoaW5nIGVsc2UgKGJhc2ljIHN3YXJtZXJzLCBzY291dHMsIGxhcnZhZSkKICAgICAgICByZXR1cm4gMQogICAgZW5kCgogICAgLS0gVGllciBoZWFsdGggbXVsdGlwbGllcnMKICAgIGxvY2FsIFRJRVJfSFAgPSB7CiAgICAgICAgWzFdID0gMC43NSwgICAtLSBUMTogZWFzaWVyIGVhcmx5IGdhbWUKICAgICAgICBbMl0gPSAxLjAsICAgIC0tIFQyOiBzdGFuZGFyZCBwcmVzc3VyZQogICAgICAgIFszXSA9IDEuMywgICAgLS0gVDM6IGRlbWFuZHMgVDIrIHBsYXllciBhcm1pZXMKICAgICAgICBbNF0gPSAxLjYsICAgIC0tIFQ0OiByZXF1aXJlcyBUMyBwbGF5ZXIgcmVzcG9uc2UKICAgIH0KCiAgICBmb3IgbmFtZSwgdURlZiBpbiBwYWlycyh1bml0RGVmcykgZG8KICAgICAgICBpZiB1RGVmLmN1c3RvbXBhcmFtcyBhbmQgdURlZi5jdXN0b21wYXJhbXMuc3ViZm9sZGVyID09ICJvdGhlci9yYXB0b3JzIiB0aGVuCiAgICAgICAgICAgIC0tIFNraXAgcXVlZW4gKGhhbmRsZWQgaW4gdHdlYWtkZWZzMSkKICAgICAgICAgICAgaWYgbmFtZTptYXRjaCgiXnJhcHRvcl9xdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgIGdvdG8gY29udGludWUKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCB0aWVyID0gZ2V0UmFwdG9yVGllcihuYW1lKQogICAgICAgICAgICBsb2NhbCBocE11bHQgPSBUSUVSX0hQW3RpZXJdIG9yIDEuMAoKICAgICAgICAgICAgLS0gU2NhbGUgaGVhbHRoIGFuZCByZWNhbGN1bGF0ZSBtZXRhbGNvc3QgcHJvcG9ydGlvbmFsbHkKICAgICAgICAgICAgaWYgdURlZi5oZWFsdGggdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgb2xkSGVhbHRoID0gdURlZi5oZWFsdGgKICAgICAgICAgICAgICAgIHVEZWYuaGVhbHRoID0gbWF0aC5mbG9vcih1RGVmLmhlYWx0aCAqIGhwTXVsdCkKICAgICAgICAgICAgICAgIGlmIHVEZWYubWV0YWxjb3N0IGFuZCBvbGRIZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICB1RGVmLm1ldGFsY29zdCA9IG1hdGguZmxvb3IodURlZi5oZWFsdGggKiAwLjc1IC8gaHBNdWx0KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gUHJldmVudCByYXB0b3JzIGZyb20gY2hhc2luZyBjcml0dGVycy9vYmplY3RzCiAgICAgICAgICAgIHVEZWYubm9jaGFzZWNhdGVnb3J5ID0gIk9CSkVDVCIKCiAgICAgICAgICAgIC0tIFJhcHRvciB0dXJyZXRzOiBoYWx2ZSByYW5nZSwgZG91YmxlIGhlYWx0aCAoc3RheSBuZWFyIGNlbnRlciBidXJyb3dzKQogICAgICAgICAgICBpZiB1RGVmLnNwZWVkID09IG5pbCBvciB1RGVmLnNwZWVkID09IDAgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHVEZWYuY2FubW92ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdURlZi5oZWFsdGggPSBtYXRoLmZsb29yKCh1RGVmLmhlYWx0aCBvciA1MDApICogMi4wKQogICAgICAgICAgICAgICAgICAgIGlmIHVEZWYud2VhcG9uZGVmcyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB3bmFtZSwgd0RlZiBpbiBwYWlycyh1RGVmLndlYXBvbmRlZnMpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB3RGVmLnJhbmdlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3RGVmLnJhbmdlID0gbWF0aC5mbG9vcih3RGVmLnJhbmdlICogMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gQm9tYmVyIGRhbWFnZSByZWR1Y3Rpb24gKGdyb3VuZCBhcm15IGZvY3VzKQogICAgICAgICAgICBpZiB1RGVmLmNhbmZseSBhbmQgdURlZi53ZWFwb25kZWZzIHRoZW4KICAgICAgICAgICAgICAgIGZvciB3bmFtZSwgd0RlZiBpbiBwYWlycyh1RGVmLndlYXBvbmRlZnMpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgd0RlZi5kYW1hZ2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgZHR5cGUsIGR2YWwgaW4gcGFpcnMod0RlZi5kYW1hZ2UpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3RGVmLmRhbWFnZVtkdHlwZV0gPSBtYXRoLmZsb29yKGR2YWwgKiAwLjcpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gQWlyIGZpZ2h0ZXJzOiBjb252ZXJ0IHRvIHNwaWtlIHByb2plY3RpbGVzIChOdXR0eUIgcGF0dGVybikKICAgICAgICAgICAgaWYgdURlZi5jYW5mbHkgYW5kIHVEZWYud2VhcG9uZGVmcyB0aGVuCiAgICAgICAgICAgICAgICBmb3Igd25hbWUsIHdEZWYgaW4gcGFpcnModURlZi53ZWFwb25kZWZzKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHdEZWYud2VhcG9udHlwZSA9PSAiTWlzc2lsZUxhdW5jaGVyIiBvciB3RGVmLndlYXBvbnR5cGUgPT0gIkFpcmNyYWZ0Qm9tYiIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB3RGVmLndlYXBvbnR5cGUgPSAiQ2Fubm9uIgogICAgICAgICAgICAgICAgICAgICAgICB3RGVmLnR1cnJldCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd0RlZi5iYWxsaXN0aWMgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB3RGVmLmdyYXZpdHlhZmZlY3RlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAtLSBTdHJpcCB1bm5lY2Vzc2FyeSB2aXN1YWwgZWZmZWN0cwogICAgICAgICAgICB1RGVmLnNmeHR5cGVzID0ge30KCiAgICAgICAgICAgIDo6Y29udGludWU6OgogICAgICAgIGVuZAogICAgZW5kCmVuZAo
!bset tweakdefs1 LS0gUmFwdG9yIFByb2dyZXNzaW9uOiBRdWVlbiBGaW5hbCBCb3NzIChTbG90IDEpCi0tIFNhdGlzZnlpbmcgZW5kZ2FtZSBib3NzIC0tIGFwcGVhcnMgYXJvdW5kIDI1LTMwIG1pbiBtYXJrCgpkbwogICAgbG9jYWwgdW5pdERlZnMgPSBVbml0RGVmcyBvciB7fQoKICAgIGZvciBuYW1lLCB1RGVmIGluIHBhaXJzKHVuaXREZWZzKSBkbwogICAgICAgIGlmIG5hbWU6bWF0Y2goJ15yYXB0b3JfcXVlZW5fLionKSBvciBuYW1lID09ICJyYXB0b3JfcXVlZW4iIHRoZW4KICAgICAgICAgICAgLS0gRG91YmxlIHF1ZWVuIGhlYWx0aCBmb3IgYSBjaGFsbGVuZ2luZyBidXQgYmVhdGFibGUgZmlnaHQKICAgICAgICAgICAgdURlZi5oZWFsdGggPSBtYXRoLmZsb29yKCh1RGVmLmhlYWx0aCBvciA1MDAwMCkgKiAyLjApCgogICAgICAgICAgICAtLSBEaXNhYmxlIHJlcGFpciBhbmQgaGVhbGluZyAtLSBtdXN0IGJlIGtpbGxlZCB0aHJvdWdoIHJhdyBkYW1hZ2UKICAgICAgICAgICAgdURlZi5yZXBhaXJhYmxlID0gMAogICAgICAgICAgICB1RGVmLmNhbmJlaGVhbGVkID0gMAogICAgICAgICAgICB1RGVmLmNhblNlbGZSZXBhaXIgPSAwCgogICAgICAgICAgICAtLSBOZWdsaWdpYmxlIHJlZ2VuIChjb3NtZXRpYyBvbmx5KQogICAgICAgICAgICB1RGVmLmF1dG9oZWFsID0gMgogICAgICAgICAgICB1RGVmLmlkbGVhdXRvaGVhbCA9IDIKCiAgICAgICAgICAgIC0tIE5vIHF1aWNrIHJlc3Bhd24gLS0gZXh0cmVtZWx5IGxvbmcgYnVpbGR0aW1lCiAgICAgICAgICAgIHVEZWYuYnVpbGR0aW1lID0gOTk5OTk5OQoKICAgICAgICAgICAgLS0gTWFrZSBxdWVlbiB3b3J0aCBzaWduaWZpY2FudCByZWNsYWltCiAgICAgICAgICAgIHVEZWYubWV0YWxjb3N0ID0gbWF0aC5mbG9vcigodURlZi5tZXRhbGNvc3Qgb3IgNTAwMCkgKiAxLjUpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCg
!bset tweakdefs2 LS0gUmFwdG9yIFByb2dyZXNzaW9uOiBQbGF5ZXIgRWNvbm9teSAmIEFybXkgUHJvZ3Jlc3Npb24gKFNsb3QgMikKLS0gVDEgc3BhbSBlYXJseSAtPiBuYXR1cmFsIHRlY2gtdXAgbWlkLWdhbWUgLT4gVDMgZW5kZ2FtZSBpbnZlc3RtZW50CgpkbwogICAgbG9jYWwgdW5pdERlZnMgPSBVbml0RGVmcyBvciB7fQoKICAgIC0tIERldGVjdCB0ZWNoIGxldmVsIGZyb20gY3VzdG9tcGFyYW1zCiAgICBsb2NhbCBmdW5jdGlvbiBnZXRUZWNoTGV2ZWwodURlZikKICAgICAgICBpZiB1RGVmLmN1c3RvbXBhcmFtcyBhbmQgdURlZi5jdXN0b21wYXJhbXMudGVjaGxldmVsIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHRvbnVtYmVyKHVEZWYuY3VzdG9tcGFyYW1zLnRlY2hsZXZlbCkKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gbmlsCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBpc1JhcHRvcih1RGVmKQogICAgICAgIHJldHVybiB1RGVmLmN1c3RvbXBhcmFtcyBhbmQgdURlZi5jdXN0b21wYXJhbXMuc3ViZm9sZGVyID09ICJvdGhlci9yYXB0b3JzIgogICAgZW5kCgogICAgLS0gVGllciBzY2FsaW5nIGZvciBwbGF5ZXIgdW5pdHMKICAgIGxvY2FsIFRJRVJfQ09TVCA9IHsKICAgICAgICBbMV0gPSAwLjgwLCAgIC0tIFQxOiBjaGVhcCBmb3IgZWFybHkgc3BhbQogICAgICAgIFsyXSA9IDEuMCwgICAgLS0gVDI6IHN0YW5kYXJkCiAgICAgICAgWzNdID0gMS4xMCwgICAtLSBUMzogaW52ZXN0bWVudCBjb3N0CiAgICB9CgogICAgbG9jYWwgVElFUl9IUCA9IHsKICAgICAgICBbMV0gPSAxLjEsICAgIC0tIFQxOiBzbGlnaHRseSB0YW5reQogICAgICAgIFsyXSA9IDEuMDUsICAgLS0gVDI6IG1vZGVzdCBidWZmCiAgICAgICAgWzNdID0gMS4xNSwgICAtLSBUMzogZHVyYWJsZSBwYXlvZmYKICAgIH0KCiAgICAtLSBDb21tYW5kZXIgdW5pdCBuYW1lcwogICAgbG9jYWwgY29tbWFuZGVycyA9IHt9CiAgICBmb3IgXywgcHJlZml4IGluIGlwYWlycyh7ImFybWNvbSIsICJjb3Jjb20iLCAibGVnY29tIn0pIGRvCiAgICAgICAgY29tbWFuZGVyc1twcmVmaXhdID0gdHJ1ZQogICAgICAgIGZvciBsdmwgPSAxLCAxMCBkbwogICAgICAgICAgICBjb21tYW5kZXJzW3ByZWZpeCAuLiAibHZsIiAuLiBsdmxdID0gdHJ1ZQogICAgICAgIGVuZAogICAgZW5kCgogICAgZm9yIG5hbWUsIHVEZWYgaW4gcGFpcnModW5pdERlZnMpIGRvCiAgICAgICAgLS0gU2tpcCByYXB0b3IgdW5pdHMKICAgICAgICBpZiBpc1JhcHRvcih1RGVmKSB0aGVuCiAgICAgICAgICAgIGdvdG8gY29udGludWUKICAgICAgICBlbmQKCiAgICAgICAgLS0gQ29tbWFuZGVyIHNoaWVsZDogZWFybHkgc3Vydml2YWwgdG9vbAogICAgICAgIGlmIGNvbW1hbmRlcnNbbmFtZV0gdGhlbgogICAgICAgICAgICBpZiBub3QgdURlZi53ZWFwb25kZWZzIHRoZW4KICAgICAgICAgICAgICAgIHVEZWYud2VhcG9uZGVmcyA9IHt9CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB1RGVmLndlYXBvbmRlZnMucHJvZ3NoaWVsZCA9IHsKICAgICAgICAgICAgICAgIG5hbWUgPSAiUHJvZ3Jlc3Npb25TaGllbGQiLAogICAgICAgICAgICAgICAgd2VhcG9udHlwZSA9ICJTaGllbGQiLAogICAgICAgICAgICAgICAgc2hpZWxkcG93ZXIgPSA1MDAsCiAgICAgICAgICAgICAgICBzaGllbGRwb3dlcnJlZ2VuID0gMTUsCiAgICAgICAgICAgICAgICBzaGllbGRwb3dlcnJlZ2VuZW5lcmd5ID0gNSwKICAgICAgICAgICAgICAgIHNoaWVsZHJhZGl1cyA9IDEwMCwKICAgICAgICAgICAgICAgIHNoaWVsZHJlcHVsc2VyID0gMCwKICAgICAgICAgICAgICAgIHNtYXJ0c2hpZWxkID0gMSwKICAgICAgICAgICAgICAgIHZpc2libGVzaGllbGQgPSAxLAogICAgICAgICAgICAgICAgdmlzaWJsZXNoaWVsZHJlcHVsc2UgPSAwLAogICAgICAgICAgICAgICAgc2hpZWxkc3RhcnRpbmdwb3dlciA9IDUwMCwKICAgICAgICAgICAgICAgIHNoaWVsZGludGVyY2VwdHR5cGUgPSAxLAogICAgICAgICAgICB9CiAgICAgICAgICAgIC0tIEFkZCBzaGllbGQgdG8gd2VhcG9ucyBsaXN0IGlmIG5vdCBwcmVzZW50CiAgICAgICAgICAgIGlmIG5vdCB1RGVmLndlYXBvbnMgdGhlbgogICAgICAgICAgICAgICAgdURlZi53ZWFwb25zID0ge30KICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGxvY2FsIGhhc1NoaWVsZCA9IGZhbHNlCiAgICAgICAgICAgIGZvciBfLCB3IGluIGlwYWlycyh1RGVmLndlYXBvbnMpIGRvCiAgICAgICAgICAgICAgICBpZiB3LmRlZiA9PSAicHJvZ3NoaWVsZCIgdGhlbgogICAgICAgICAgICAgICAgICAgIGhhc1NoaWVsZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBub3QgaGFzU2hpZWxkIHRoZW4KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh1RGVmLndlYXBvbnMsIHsgZGVmID0gInByb2dzaGllbGQiIH0pCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBnb3RvIGNvbnRpbnVlCiAgICAgICAgZW5kCgogICAgICAgIC0tIE9ubHkgbW9kaWZ5IG1vYmlsZSBwbGF5ZXIgdW5pdHMKICAgICAgICBpZiBub3QgdURlZi5jYW5tb3ZlIG9yICh1RGVmLnNwZWVkIGFuZCB1RGVmLnNwZWVkID09IDApIHRoZW4KICAgICAgICAgICAgZ290byBjb250aW51ZQogICAgICAgIGVuZAoKICAgICAgICAtLSBGbHlpbmcgYnVpbGRlcnM6IHJlbW92ZSBzZWxmLWRlc3RydWN0IGV4cGxvc2lvbiAoUW9MKQogICAgICAgIGlmIHVEZWYuY2FuZmx5IGFuZCB1RGVmLndvcmtlcnRpbWUgYW5kIHVEZWYud29ya2VydGltZSA-IDAgdGhlbgogICAgICAgICAgICBpZiB1RGVmLndlYXBvbmRlZnMgdGhlbgogICAgICAgICAgICAgICAgZm9yIHduYW1lLCB3RGVmIGluIHBhaXJzKHVEZWYud2VhcG9uZGVmcykgZG8KICAgICAgICAgICAgICAgICAgICBpZiB3bmFtZTptYXRjaCgic2VsZmQiKSBvciB3bmFtZTptYXRjaCgic2VsZl9kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiB3RGVmLmRhbWFnZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgZHR5cGUsIF8gaW4gcGFpcnMod0RlZi5kYW1hZ2UpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd0RlZi5kYW1hZ2VbZHR5cGVdID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICAtLSBBcHBseSB0aWVyLWJhc2VkIHNjYWxpbmcgdG8gbW9iaWxlIGNvbWJhdCB1bml0cwogICAgICAgIGxvY2FsIHRsID0gZ2V0VGVjaExldmVsKHVEZWYpCiAgICAgICAgaWYgdGwgYW5kIFRJRVJfQ09TVFt0bF0gdGhlbgogICAgICAgICAgICBpZiB1RGVmLm1ldGFsY29zdCB0aGVuCiAgICAgICAgICAgICAgICB1RGVmLm1ldGFsY29zdCA9IG1hdGguZmxvb3IodURlZi5tZXRhbGNvc3QgKiBUSUVSX0NPU1RbdGxdKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgdURlZi5lbmVyZ3ljb3N0IHRoZW4KICAgICAgICAgICAgICAgIHVEZWYuZW5lcmd5Y29zdCA9IG1hdGguZmxvb3IodURlZi5lbmVyZ3ljb3N0ICogVElFUl9DT1NUW3RsXSkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIHVEZWYuaGVhbHRoIHRoZW4KICAgICAgICAgICAgICAgIHVEZWYuaGVhbHRoID0gbWF0aC5mbG9vcih1RGVmLmhlYWx0aCAqIChUSUVSX0hQW3RsXSBvciAxLjApKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgOjpjb250aW51ZTo6CiAgICBlbmQKCiAgICAtLSBDb21tYW5kZXIgY29ycHNlczogaW5kZXN0cnVjdGlibGUgKHNvIHBsYXllcnMgZG9uJ3QgbG9zZSByZWNsYWltIGluY2VudGl2ZSkKICAgIGZvciBuYW1lLCBmRGVmIGluIHBhaXJzKEZlYXR1cmVEZWZzIG9yIHt9KSBkbwogICAgICAgIGlmIG5hbWU6bWF0Y2goImFybWNvbSIpIG9yIG5hbWU6bWF0Y2goImNvcmNvbSIpIG9yIG5hbWU6bWF0Y2goImxlZ2NvbSIpIHRoZW4KICAgICAgICAgICAgZkRlZi5kYW1hZ2UgPSA5OTk5OTk5CiAgICAgICAgICAgIGZEZWYucmVjbGFpbWFibGUgPSAwCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCg
!bset tweakdefs3 LS0gUmFwdG9yIFByb2dyZXNzaW9uOiBEZWZlbnNlIE5lcmZzIChTbG90IDMpCi0tIFN0YXRpYyBkZWZlbnNlcyBzdXBwbGVtZW50IGFybWllcyBidXQgY2FuJ3QgY2FycnkgYWxvbmUKCmRvCiAgICBsb2NhbCB1bml0RGVmcyA9IFVuaXREZWZzIG9yIHt9CgogICAgbG9jYWwgZnVuY3Rpb24gaXNSYXB0b3IodURlZikKICAgICAgICByZXR1cm4gdURlZi5jdXN0b21wYXJhbXMgYW5kIHVEZWYuY3VzdG9tcGFyYW1zLnN1YmZvbGRlciA9PSAib3RoZXIvcmFwdG9ycyIKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGlzU3RhdGljRGVmZW5zZSh1RGVmKQogICAgICAgIGlmIHVEZWYuY2FubW92ZSB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAgICAgICBpZiB1RGVmLnNwZWVkIGFuZCB1RGVmLnNwZWVkID4gMCB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAgICAgICBpZiB1RGVmLndlYXBvbmRlZnMgdGhlbgogICAgICAgICAgICBmb3IgXywgd0RlZiBpbiBwYWlycyh1RGVmLndlYXBvbmRlZnMpIGRvCiAgICAgICAgICAgICAgICBpZiB3RGVmLmRhbWFnZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGlzV2FsbChuYW1lLCB1RGVmKQogICAgICAgIGlmIG5hbWU6bWF0Y2goIndhbGwiKSBvciBuYW1lOm1hdGNoKCJkcmFnb25fdGVldGgiKSBvciBuYW1lOm1hdGNoKCJkdG9vdGgiKQogICAgICAgICAgIG9yIG5hbWU6bWF0Y2goImZvcnRpZmljYXRpb24iKSB0aGVuCiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgZW5kCiAgICAgICAgaWYgbm90IHVEZWYuY2FubW92ZSBhbmQgbm90IHVEZWYud2VhcG9uZGVmcyBhbmQgdURlZi5tZXRhbGNvc3QgYW5kIHVEZWYubWV0YWxjb3N0IDwgNTAgdGhlbgogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIGVuZAogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCgogICAgbG9jYWwgZnVuY3Rpb24gaXNBbnRpQWlyKHVEZWYpCiAgICAgICAgaWYgdURlZi53ZWFwb25kZWZzIHRoZW4KICAgICAgICAgICAgZm9yIF8sIHdEZWYgaW4gcGFpcnModURlZi53ZWFwb25kZWZzKSBkbwogICAgICAgICAgICAgICAgaWYgd0RlZi5jYW5hdHRhY2tncm91bmQgPT0gZmFsc2Ugb3Igd0RlZi5vbmx5VGFyZ2V0Q2F0ZWdvcnkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNhdCA9IHdEZWYub25seVRhcmdldENhdGVnb3J5IG9yICIiCiAgICAgICAgICAgICAgICAgICAgaWYgY2F0Om1hdGNoKCJWVE9MIikgb3IgY2F0Om1hdGNoKCJBSVIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBmb3IgbmFtZSwgdURlZiBpbiBwYWlycyh1bml0RGVmcykgZG8KICAgICAgICAtLSBTa2lwIHJhcHRvciB1bml0cwogICAgICAgIGlmIGlzUmFwdG9yKHVEZWYpIHRoZW4KICAgICAgICAgICAgZ290byBjb250aW51ZQogICAgICAgIGVuZAoKICAgICAgICAtLSBXYWxsczogaGVhbHRoIGJ1ZmYgdG8gbWFrZSBiYXNlIGxheW91dCBtYXR0ZXIKICAgICAgICBpZiBpc1dhbGwobmFtZSwgdURlZikgdGhlbgogICAgICAgICAgICB1RGVmLmhlYWx0aCA9IG1hdGguZmxvb3IoKHVEZWYuaGVhbHRoIG9yIDIwMCkgKiAxLjUpCiAgICAgICAgICAgIGdvdG8gY29udGludWUKICAgICAgICBlbmQKCiAgICAgICAgLS0gU3RhdGljIGRlZmVuc2UgdG93ZXJzCiAgICAgICAgaWYgaXNTdGF0aWNEZWZlbnNlKHVEZWYpIHRoZW4KICAgICAgICAgICAgLS0gSGVhbHRoIGJ1ZmYgKHN1cnZpdmUgbG9uZ2VyIHdoZW4gZW5nYWdlZCkKICAgICAgICAgICAgdURlZi5oZWFsdGggPSBtYXRoLmZsb29yKCh1RGVmLmhlYWx0aCBvciA1MDApICogMS4yKQoKICAgICAgICAgICAgaWYgdURlZi53ZWFwb25kZWZzIHRoZW4KICAgICAgICAgICAgICAgIGZvciB3bmFtZSwgd0RlZiBpbiBwYWlycyh1RGVmLndlYXBvbmRlZnMpIGRvCiAgICAgICAgICAgICAgICAgICAgLS0gUmFuZ2UgbmVyZiAoc2hvcnRlciByZWFjaCA9IG11c3QgaGF2ZSBhcm15IGNvdmVyYWdlKQogICAgICAgICAgICAgICAgICAgIGlmIHdEZWYucmFuZ2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB3RGVmLnJhbmdlID0gbWF0aC5mbG9vcih3RGVmLnJhbmdlICogMC43NSkKICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgLS0gRGFtYWdlIG5lcmYgKGxlc3MgRFBTIHRoYW4gbW9iaWxlIGFybWllcykKICAgICAgICAgICAgICAgICAgICBpZiB3RGVmLmRhbWFnZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBkdHlwZSwgZHZhbCBpbiBwYWlycyh3RGVmLmRhbWFnZSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdEZWYuZGFtYWdlW2R0eXBlXSA9IG1hdGguZmxvb3IoZHZhbCAqIDAuODUpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAtLSBBbnRpLWFpcjogZmFzdGVyIHJlbG9hZCAoYWlyIHdhdmVzIGFyZSBkYW5nZXJvdXMsIEFBIGhlbHBzKQogICAgICAgICAgICAgICAgICAgIGlmIGlzQW50aUFpcih1RGVmKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHdEZWYucmVsb2FkdGltZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3RGVmLnJlbG9hZHRpbWUgPSB3RGVmLnJlbG9hZHRpbWUgKiAwLjg1CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICA6OmNvbnRpbnVlOjoKICAgIGVuZAplbmQK
!bset tweakdefs4 LS0gUmFwdG9yIFByb2dyZXNzaW9uOiBNaW5pLUJvc3MgQ2hlY2twb2ludHMgKFNsb3QgNCkKLS0gTWlkLWdhbWUgYm9zc2VzIHNpZ25hbCAidGltZSB0byB0ZWNoIHVwIgoKZG8KICAgIGxvY2FsIHVuaXREZWZzID0gVW5pdERlZnMgb3Ige30KICAgIGxvY2FsIHNwcmluZyA9IFNwcmluZyBvciB7fQogICAgbG9jYWwgbW9kT3B0aW9ucyA9IChzcHJpbmcuR2V0TW9kT3B0aW9ucyBhbmQgc3ByaW5nLkdldE1vZE9wdGlvbnMoKSkgb3Ige30KCiAgICAtLSBQbGF5ZXIgY291bnQgc2NhbGluZwogICAgbG9jYWwgdGVhbUxpc3QgPSAoc3ByaW5nLkdldFRlYW1MaXN0IGFuZCBzcHJpbmcuR2V0VGVhbUxpc3QoKSkgb3Ige30KICAgIGxvY2FsIHBsYXllckNvdW50ID0gbWF0aC5tYXgoI3RlYW1MaXN0IC0gMiwgMSkgIC0tIHN1YnRyYWN0IGdhaWEgKyByYXB0b3IgdGVhbXMKICAgIGxvY2FsIHBsYXllckNvdW50U2NhbGUgPSBwbGF5ZXJDb3VudCAvIDEyCiAgICBsb2NhbCBzcGF3bkNvdW50TXVsdCA9IHRvbnVtYmVyKG1vZE9wdGlvbnMucmFwdG9yX3NwYXduY291bnRtdWx0KSBvciAzCiAgICBsb2NhbCB0b3RhbFNwYXduU2NhbGUgPSBtYXRoLm1heChwbGF5ZXJDb3VudFNjYWxlICogKHNwYXduQ291bnRNdWx0IC8gMyksIDAuNSkKCiAgICAtLSBRdWVlbiB0aW1lIG11bHRpcGxpZXIgYWZmZWN0cyBhbmdlciB0aHJlc2hvbGRzCiAgICBsb2NhbCBxdWVlblRpbWVNdWx0ID0gdG9udW1iZXIobW9kT3B0aW9ucy5yYXB0b3JfcXVlZW50aW1lbXVsdCkgb3IgMS4wCgogICAgLS0gSGVscGVyOiBzZXQgcHJvcGVyIFB2RSBzcXVhZCBwYXJhbWV0ZXJzCiAgICBsb2NhbCBmdW5jdGlvbiBwdmVTcXVhZChwYXJhbXMsIHVuaXROYW1lLCBtaW5BbmdlciwgbWF4QW5nZXIsIGJlaGF2aW9yLCBhbW91bnQsIHdlaWdodCwgcmFyaXR5KQogICAgICAgIHBhcmFtcy5yYXB0b3JjdXN0b21zcXVhZCA9ICJ0cnVlIgogICAgICAgIHBhcmFtcy5yYXB0b3JzcXVhZHVuaXRuYW1lID0gdW5pdE5hbWUKICAgICAgICBwYXJhbXMucmFwdG9yc3F1YWR1bml0c2Ftb3VudCA9IHRvc3RyaW5nKGFtb3VudCBvciAxKQogICAgICAgIHBhcmFtcy5yYXB0b3JzcXVhZG1pbmFuZ2VyID0gdG9zdHJpbmcobWF0aC5mbG9vcihtaW5BbmdlciAqIHF1ZWVuVGltZU11bHQpKQogICAgICAgIHBhcmFtcy5yYXB0b3JzcXVhZG1heGFuZ2VyID0gdG9zdHJpbmcobWF0aC5mbG9vcihtYXhBbmdlciAqIHF1ZWVuVGltZU11bHQpKQogICAgICAgIHBhcmFtcy5yYXB0b3JzcXVhZHdlaWdodCA9IHRvc3RyaW5nKHdlaWdodCBvciA1KQogICAgICAgIHBhcmFtcy5yYXB0b3JzcXVhZHJhcml0eSA9IHJhcml0eSBvciAiYmFzaWMiCiAgICAgICAgcGFyYW1zLnJhcHRvcnNxdWFkYmVoYXZpb3IgPSBiZWhhdmlvciBvciAiQkVSU0VSS0VSIgogICAgZW5kCgogICAgLS0gSGVscGVyOiBjbG9uZSBhIHVuaXQgc2FmZWx5IHVzaW5nIHRhYmxlLmNvcHkgKFNwcmluZy1wcm92aWRlZCkgb3IgbWFudWFsIGNvcHkKICAgIGxvY2FsIGZ1bmN0aW9uIGNsb25lVW5pdChiYXNlTmFtZSwgbmV3TmFtZSwgb3ZlcnJpZGVzKQogICAgICAgIGlmIG5vdCB1bml0RGVmc1tiYXNlTmFtZV0gb3IgdW5pdERlZnNbbmV3TmFtZV0gdGhlbgogICAgICAgICAgICByZXR1cm4gbmlsCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgYmFzZSA9IHVuaXREZWZzW2Jhc2VOYW1lXQogICAgICAgIGxvY2FsIGNvcHkKICAgICAgICBpZiB0YWJsZS5jb3B5IHRoZW4KICAgICAgICAgICAgY29weSA9IHRhYmxlLmNvcHkoYmFzZSkKICAgICAgICBlbHNlCiAgICAgICAgICAgIC0tIE1hbnVhbCBkZWVwIGNvcHkgZmFsbGJhY2sKICAgICAgICAgICAgbG9jYWwgZnVuY3Rpb24gZGVlcENvcHkob3JpZykKICAgICAgICAgICAgICAgIGlmIHR5cGUob3JpZykgfj0gInRhYmxlIiB0aGVuIHJldHVybiBvcmlnIGVuZAogICAgICAgICAgICAgICAgbG9jYWwgYyA9IHt9CiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhvcmlnKSBkbwogICAgICAgICAgICAgICAgICAgIGNba10gPSBkZWVwQ29weSh2KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICByZXR1cm4gc2V0bWV0YXRhYmxlKGMsIGdldG1ldGF0YWJsZShvcmlnKSkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGNvcHkgPSBkZWVwQ29weShiYXNlKQogICAgICAgIGVuZAogICAgICAgIGlmIG92ZXJyaWRlcyB0aGVuCiAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKG92ZXJyaWRlcykgZG8KICAgICAgICAgICAgICAgIGNvcHlba10gPSB2CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHVuaXREZWZzW25ld05hbWVdID0gY29weQogICAgICAgIHJldHVybiBjb3B5CiAgICBlbmQKCiAgICAtLSBGaW5kIGJlc3QgbWF0cmlhcmNoIGJhc2UgdG8gY2xvbmUgZnJvbQogICAgbG9jYWwgbWF0cmlhcmNoQmFzZSA9IG5pbAogICAgbG9jYWwgbWF0cmlhcmNoVmFyaWFudHMgPSB7CiAgICAgICAgInJhcHRvcl9tYXRyaWFyY2hfYmFzaWMiLCAicmFwdG9yX21hdHJpYXJjaCIsCiAgICAgICAgInJhcHRvcl9ndWFyZGlhbiIsICJyYXB0b3JfbWF0cmlhcmNoX2ZpcmUiLAogICAgICAgICJyYXB0b3JfbWF0cmlhcmNoX2FjaWQiLCAicmFwdG9yX21hdHJpYXJjaF9lbGVjdHJpYyIsCiAgICB9CiAgICBmb3IgXywgY2FuZGlkYXRlIGluIGlwYWlycyhtYXRyaWFyY2hWYXJpYW50cykgZG8KICAgICAgICBpZiB1bml0RGVmc1tjYW5kaWRhdGVdIHRoZW4KICAgICAgICAgICAgbWF0cmlhcmNoQmFzZSA9IGNhbmRpZGF0ZQogICAgICAgICAgICBicmVhawogICAgICAgIGVuZAogICAgZW5kCgogICAgLS0gRmFsbGJhY2s6IGFueSBoaWdoLUhQIHJhcHRvcgogICAgaWYgbm90IG1hdHJpYXJjaEJhc2UgdGhlbgogICAgICAgIGZvciBuYW1lLCB1RGVmIGluIHBhaXJzKHVuaXREZWZzKSBkbwogICAgICAgICAgICBpZiB1RGVmLmN1c3RvbXBhcmFtcyBhbmQgdURlZi5jdXN0b21wYXJhbXMuc3ViZm9sZGVyID09ICJvdGhlci9yYXB0b3JzIgogICAgICAgICAgICAgICBhbmQgbm90IG5hbWU6bWF0Y2goInF1ZWVuIikgYW5kIHVEZWYuaGVhbHRoIGFuZCB1RGVmLmhlYWx0aCA-IDIwMDAgdGhlbgogICAgICAgICAgICAgICAgbWF0cmlhcmNoQmFzZSA9IG5hbWUKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgaWYgbWF0cmlhcmNoQmFzZSB0aGVuCiAgICAgICAgbG9jYWwgYmFzZUhQID0gdW5pdERlZnNbbWF0cmlhcmNoQmFzZV0uaGVhbHRoIG9yIDUwMDAKICAgICAgICBsb2NhbCBiYXNlU3BlZWQgPSB1bml0RGVmc1ttYXRyaWFyY2hCYXNlXS5zcGVlZCBvciA2MAoKICAgICAgICAtLSBTY2FsZSBtYXgtcGVyLWJvc3MgYnkgcGxheWVyIGNvdW50CiAgICAgICAgbG9jYWwgbWF4Qm9zc0NvdW50ID0gbWF0aC5tYXgobWF0aC5mbG9vcigxICsgcGxheWVyQ291bnQgLyA0KSwgMSkKCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLS0gTWluaS1ib3NzIHRpZXIgMTogTWF0cm9uICh-MTAgbWluLCBhbmdlciB-MzAwKQogICAgICAgIC0tIFNpZ25hbHMgbmVlZCBmb3IgVDIgcGxheWVyIHRlY2gKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBsb2NhbCBtYXRyb24gPSBjbG9uZVVuaXQobWF0cmlhcmNoQmFzZSwgInJhcHRvcl9taW5pYm9zc19tYXRyb24iLCB7CiAgICAgICAgICAgIGhlYWx0aCA9IG1hdGguZmxvb3IoYmFzZUhQICogMy4wICogdG90YWxTcGF3blNjYWxlKSwKICAgICAgICAgICAgbWV0YWxjb3N0ID0gMjAwMCwKICAgICAgICAgICAgZW5lcmd5Y29zdCA9IDIwMDAwLAogICAgICAgICAgICBzcGVlZCA9IGJhc2VTcGVlZCAqIDAuOSwKICAgICAgICAgICAgbWF4dGhpc3VuaXQgPSBtYXhCb3NzQ291bnQsCiAgICAgICAgfSkKICAgICAgICBpZiBtYXRyb24gdGhlbgogICAgICAgICAgICBtYXRyb24uY3VzdG9tcGFyYW1zID0gbWF0cm9uLmN1c3RvbXBhcmFtcyBvciB7fQogICAgICAgICAgICBtYXRyb24uY3VzdG9tcGFyYW1zLnN1YmZvbGRlciA9ICJvdGhlci9yYXB0b3JzIgogICAgICAgICAgICBwdmVTcXVhZChtYXRyb24uY3VzdG9tcGFyYW1zLCAicmFwdG9yX21pbmlib3NzX21hdHJvbiIsIDI1MCwgNDUwLCAiQkVSU0VSS0VSIiwgMSwgNSwgImJhc2ljIikKICAgICAgICAgICAgLS0gU3RyYWlnaHRmb3J3YXJkIGRhbWFnZSBib29zdAogICAgICAgICAgICBpZiBtYXRyb24ud2VhcG9uZGVmcyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgd0RlZiBpbiBwYWlycyhtYXRyb24ud2VhcG9uZGVmcykgZG8KICAgICAgICAgICAgICAgICAgICBpZiB3RGVmLmRhbWFnZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBkdHlwZSwgZHZhbCBpbiBwYWlycyh3RGVmLmRhbWFnZSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdEZWYuZGFtYWdlW2R0eXBlXSA9IG1hdGguZmxvb3IoZHZhbCAqIDIuMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC0tIE1pbmktYm9zcyB0aWVyIDI6IFF1ZWVubGluZyAofjIwIG1pbiwgYW5nZXIgfjUwMCkKICAgICAgICAtLSBTaWduYWxzIG5lZWQgZm9yIFQzIHBsYXllciB0ZWNoCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgbG9jYWwgcXVlZW5saW5nID0gY2xvbmVVbml0KG1hdHJpYXJjaEJhc2UsICJyYXB0b3JfbWluaWJvc3NfcXVlZW5saW5nIiwgewogICAgICAgICAgICBoZWFsdGggPSBtYXRoLmZsb29yKGJhc2VIUCAqIDUuMCAqIHRvdGFsU3Bhd25TY2FsZSksCiAgICAgICAgICAgIG1ldGFsY29zdCA9IDQwMDAsCiAgICAgICAgICAgIGVuZXJneWNvc3QgPSA0MDAwMCwKICAgICAgICAgICAgc3BlZWQgPSBiYXNlU3BlZWQgKiAwLjgsCiAgICAgICAgICAgIG1heHRoaXN1bml0ID0gbWF4Qm9zc0NvdW50LAogICAgICAgIH0pCiAgICAgICAgaWYgcXVlZW5saW5nIHRoZW4KICAgICAgICAgICAgcXVlZW5saW5nLmN1c3RvbXBhcmFtcyA9IHF1ZWVubGluZy5jdXN0b21wYXJhbXMgb3Ige30KICAgICAgICAgICAgcXVlZW5saW5nLmN1c3RvbXBhcmFtcy5zdWJmb2xkZXIgPSAib3RoZXIvcmFwdG9ycyIKICAgICAgICAgICAgcHZlU3F1YWQocXVlZW5saW5nLmN1c3RvbXBhcmFtcywgInJhcHRvcl9taW5pYm9zc19xdWVlbmxpbmciLCA0MDAsIDY1MCwgIkJFUlNFUktFUiIsIDEsIDUsICJiYXNpYyIpCiAgICAgICAgICAgIC0tIEFjaWQgd2VhcG9uOiBhcmVhIGRhbWFnZSBib29zdAogICAgICAgICAgICBpZiBxdWVlbmxpbmcud2VhcG9uZGVmcyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgd0RlZiBpbiBwYWlycyhxdWVlbmxpbmcud2VhcG9uZGVmcykgZG8KICAgICAgICAgICAgICAgICAgICBpZiB3RGVmLmRhbWFnZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBkdHlwZSwgZHZhbCBpbiBwYWlycyh3RGVmLmRhbWFnZSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdEZWYuZGFtYWdlW2R0eXBlXSA9IG1hdGguZmxvb3IoZHZhbCAqIDMuMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgd0RlZi5hcmVhb2ZlZmZlY3QgPSAod0RlZi5hcmVhb2ZlZmZlY3Qgb3IgMCkgKyA2NAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAtLSBNaW5pLWJvc3MgdGllciAzOiBFbGl0ZSAofjI1IG1pbiwgYW5nZXIgfjcwMCkKICAgICAgICAtLSBUMyBhcm15IHRlc3QgYmVmb3JlIHF1ZWVuIGFwcGVhcnMKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBsb2NhbCBlbGl0ZSA9IGNsb25lVW5pdChtYXRyaWFyY2hCYXNlLCAicmFwdG9yX21pbmlib3NzX2VsaXRlIiwgewogICAgICAgICAgICBoZWFsdGggPSBtYXRoLmZsb29yKGJhc2VIUCAqIDcuMCAqIHRvdGFsU3Bhd25TY2FsZSksCiAgICAgICAgICAgIG1ldGFsY29zdCA9IDYwMDAsCiAgICAgICAgICAgIGVuZXJneWNvc3QgPSA2MDAwMCwKICAgICAgICAgICAgc3BlZWQgPSBiYXNlU3BlZWQgKiAwLjcsCiAgICAgICAgICAgIG1heHRoaXN1bml0ID0gbWF4Qm9zc0NvdW50LAogICAgICAgIH0pCiAgICAgICAgaWYgZWxpdGUgdGhlbgogICAgICAgICAgICBlbGl0ZS5jdXN0b21wYXJhbXMgPSBlbGl0ZS5jdXN0b21wYXJhbXMgb3Ige30KICAgICAgICAgICAgZWxpdGUuY3VzdG9tcGFyYW1zLnN1YmZvbGRlciA9ICJvdGhlci9yYXB0b3JzIgogICAgICAgICAgICBwdmVTcXVhZChlbGl0ZS5jdXN0b21wYXJhbXMsICJyYXB0b3JfbWluaWJvc3NfZWxpdGUiLCA2MDAsIDg1MCwgIkJFUlNFUktFUiIsIDEsIDUsICJiYXNpYyIpCiAgICAgICAgICAgIC0tIEVNUCB3ZWFwb246IHN0dW4gKyBoZWF2eSBkYW1hZ2UKICAgICAgICAgICAgaWYgZWxpdGUud2VhcG9uZGVmcyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgd0RlZiBpbiBwYWlycyhlbGl0ZS53ZWFwb25kZWZzKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHdEZWYuZGFtYWdlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGR0eXBlLCBkdmFsIGluIHBhaXJzKHdEZWYuZGFtYWdlKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd0RlZi5kYW1hZ2VbZHR5cGVdID0gbWF0aC5mbG9vcihkdmFsICogNC4wKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB3RGVmLnBhcmFseXplciA9IHRydWUKICAgICAgICAgICAgICAgICAgICB3RGVmLnBhcmFseXpldGltZSA9IDMKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgLS0gRGVhdGggZXhwbG9zaW9uCiAgICAgICAgICAgIGVsaXRlLmV4cGxvZGVhcyA9ICJyYXB0b3JfZW1wZGVhdGhfYmlnIgogICAgICAgICAgICBlbGl0ZS5zZWxmZGVzdHJ1Y3RhcyA9ICJyYXB0b3JfZW1wZGVhdGhfYmlnIgogICAgICAgIGVuZAogICAgZW5kCgogICAgLS0gUHJvcGVyIFVuaXREZWZfUG9zdCBjaGFpbmluZyBmb3IgcG9zdC1wcm9jZXNzaW5nCiAgICBsb2NhbCBvbGRVbml0RGVmX1Bvc3QgPSBVbml0RGVmX1Bvc3QKICAgIGZ1bmN0aW9uIFVuaXREZWZfUG9zdCh1bml0SUQsIHVuaXREZWYpCiAgICAgICAgaWYgb2xkVW5pdERlZl9Qb3N0IGFuZCBvbGRVbml0RGVmX1Bvc3Qgfj0gVW5pdERlZl9Qb3N0IHRoZW4KICAgICAgICAgICAgb2xkVW5pdERlZl9Qb3N0KHVuaXRJRCwgdW5pdERlZikKICAgICAgICBlbmQKICAgICAgICAtLSBFbnN1cmUgYWxsIG1pbmktYm9zc2VzIGhhdmUgcmFwdG9yIHN1YmZvbGRlcgogICAgICAgIGlmIHVuaXRJRCBhbmQgdHlwZSh1bml0SUQpID09ICJzdHJpbmciIGFuZCB1bml0SUQ6bWF0Y2goInJhcHRvcl9taW5pYm9zc18iKSB0aGVuCiAgICAgICAgICAgIHVuaXREZWYuY3VzdG9tcGFyYW1zID0gdW5pdERlZi5jdXN0b21wYXJhbXMgb3Ige30KICAgICAgICAgICAgdW5pdERlZi5jdXN0b21wYXJhbXMuc3ViZm9sZGVyID0gIm90aGVyL3JhcHRvcnMiCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCg
!bset tweakdefs5 LS0gUmFwdG9yIFByb2dyZXNzaW9uOiBGYWN0aW9uLUFnbm9zdGljIExhYnMgKFNsb3QgNSkKLS0gTGV0IHBsYXllcnMgYWNjZXNzIGFsbCBmYWN0aW9uIHVuaXRzIHJlZ2FyZGxlc3Mgb2Ygc3RhcnRpbmcgZmFjdGlvbgotLSBEeW5hbWljYWxseSBkZXRlY3RzIGZhY3RvcmllcyB2aWEgY3VzdG9tcGFyYW1zIGluc3RlYWQgb2YgaGFyZGNvZGVkIG5hbWVzCgpkbwogICAgbG9jYWwgdW5pdERlZnMgPSBVbml0RGVmcyBvciB7fQoKICAgIC0tIEdyb3VwIGZhY3RvcmllcyBieSB0ZWNoIGxldmVsIGFuZCB0eXBlIChzdWJmb2xkZXIpCiAgICAtLSBGYWN0b3JpZXMgc2hhcmUgYSBzdWJmb2xkZXIgbGlrZSAiQXJtL0ZhY3RvcmllcyIgYW5kIGEgdGVjaGxldmVsCiAgICBsb2NhbCBsYWJHcm91cHMgPSB7fSAgLS0ga2V5ID0gInRlY2hsZXZlbDp0eXBlIiAtPiBsaXN0IG9mIGZhY3RvcnkgbmFtZXMKCiAgICBmb3IgbmFtZSwgdURlZiBpbiBwYWlycyh1bml0RGVmcykgZG8KICAgICAgICAtLSBPbmx5IHByb2Nlc3MgZmFjdG9yaWVzOiBtdXN0IGhhdmUgYnVpbGRvcHRpb25zIGFuZCBiZSBpbW1vYmlsZQogICAgICAgIGlmIHVEZWYuYnVpbGRvcHRpb25zIGFuZCAjdURlZi5idWlsZG9wdGlvbnMgPiAwCiAgICAgICAgICAgYW5kIChub3QgdURlZi5jYW5tb3ZlIG9yIHVEZWYuc3BlZWQgPT0gMCBvciB1RGVmLnNwZWVkID09IG5pbCkgdGhlbgoKICAgICAgICAgICAgLS0gU2tpcCByYXB0b3Igc3RydWN0dXJlcwogICAgICAgICAgICBpZiB1RGVmLmN1c3RvbXBhcmFtcyBhbmQgdURlZi5jdXN0b21wYXJhbXMuc3ViZm9sZGVyID09ICJvdGhlci9yYXB0b3JzIiB0aGVuCiAgICAgICAgICAgICAgICBnb3RvIGNvbnRpbnVlCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gRGV0ZWN0IGlmIHRoaXMgaXMgYSBmYWN0b3J5IHZpYSBzdWJmb2xkZXIgY29udGFpbmluZyBjb21tb24gZmFjdG9yeSBrZXl3b3JkcwogICAgICAgICAgICBsb2NhbCBzdWJmb2xkZXIgPSB1RGVmLmN1c3RvbXBhcmFtcyBhbmQgdURlZi5jdXN0b21wYXJhbXMuc3ViZm9sZGVyIG9yICIiCiAgICAgICAgICAgIGxvY2FsIGlzRmFjdG9yeSA9IHN1YmZvbGRlcjpsb3dlcigpOm1hdGNoKCJmYWN0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Igc3ViZm9sZGVyOmxvd2VyKCk6bWF0Y2goImxhYiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIHN1YmZvbGRlcjpsb3dlcigpOm1hdGNoKCJwbGFudCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIHN1YmZvbGRlcjpsb3dlcigpOm1hdGNoKCJ5YXJkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Igc3ViZm9sZGVyOmxvd2VyKCk6bWF0Y2goInBsYXRmb3JtIikKCiAgICAgICAgICAgIGlmIGlzRmFjdG9yeSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB0bCA9ICh1RGVmLmN1c3RvbXBhcmFtcyBhbmQgdURlZi5jdXN0b21wYXJhbXMudGVjaGxldmVsKSBvciAiMSIKICAgICAgICAgICAgICAgIC0tIERldGVybWluZSBmYWN0b3J5IHR5cGUgZnJvbSBzdWJmb2xkZXIgKHN0cmlwIGZhY3Rpb24gcHJlZml4KQogICAgICAgICAgICAgICAgLS0gZS5nLiAiQXJtYWRhL0ZhY3Rvcmllcy9Cb3RMYWIiIC0-ICJCb3RMYWIiCiAgICAgICAgICAgICAgICBsb2NhbCBmYWN0b3J5VHlwZSA9IHN1YmZvbGRlcjptYXRjaCgiW14vXSskIikgb3IgInVua25vd24iCiAgICAgICAgICAgICAgICBsb2NhbCBncm91cEtleSA9IHRsIC4uICI6IiAuLiBmYWN0b3J5VHlwZTpsb3dlcigpCgogICAgICAgICAgICAgICAgaWYgbm90IGxhYkdyb3Vwc1tncm91cEtleV0gdGhlbgogICAgICAgICAgICAgICAgICAgIGxhYkdyb3Vwc1tncm91cEtleV0gPSB7fQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGFiR3JvdXBzW2dyb3VwS2V5XSwgbmFtZSkKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICA6OmNvbnRpbnVlOjoKICAgICAgICBlbmQKICAgIGVuZAoKICAgIC0tIE1lcmdlIGJ1aWxkb3B0aW9ucyB3aXRoaW4gZWFjaCBmYWN0b3J5IGdyb3VwCiAgICBsb2NhbCBmdW5jdGlvbiBtZXJnZUxhYnMobGFicykKICAgICAgICBsb2NhbCBtZXJnZWQgPSB7fQogICAgICAgIGxvY2FsIG9yZGVyID0ge30KCiAgICAgICAgZm9yIF8sIGxhYk5hbWUgaW4gaXBhaXJzKGxhYnMpIGRvCiAgICAgICAgICAgIGxvY2FsIHVEZWYgPSB1bml0RGVmc1tsYWJOYW1lXQogICAgICAgICAgICBpZiB1RGVmIGFuZCB1RGVmLmJ1aWxkb3B0aW9ucyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgYm8gaW4gaXBhaXJzKHVEZWYuYnVpbGRvcHRpb25zKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBtZXJnZWRbYm9dIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkW2JvXSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KG9yZGVyLCBibykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgaWYgI29yZGVyID4gMCB0aGVuCiAgICAgICAgICAgIGZvciBfLCBsYWJOYW1lIGluIGlwYWlycyhsYWJzKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdURlZiA9IHVuaXREZWZzW2xhYk5hbWVdCiAgICAgICAgICAgICAgICBpZiB1RGVmIHRoZW4KICAgICAgICAgICAgICAgICAgICB1RGVmLmJ1aWxkb3B0aW9ucyA9IHt9CiAgICAgICAgICAgICAgICAgICAgZm9yIGksIGJvIGluIGlwYWlycyhvcmRlcikgZG8KICAgICAgICAgICAgICAgICAgICAgICAgdURlZi5idWlsZG9wdGlvbnNbaV0gPSBibwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgLS0gT25seSBtZXJnZSBncm91cHMgd2l0aCAyKyBmYWN0b3JpZXMgKGNyb3NzLWZhY3Rpb24pCiAgICBmb3IgZ3JvdXBLZXksIGxhYnMgaW4gcGFpcnMobGFiR3JvdXBzKSBkbwogICAgICAgIGlmICNsYWJzID49IDIgdGhlbgogICAgICAgICAgICBtZXJnZUxhYnMobGFicykKICAgICAgICBlbmQKICAgIGVuZAplbmQK
!bset tweakunits ewogIC0tIFQxIEJvdCBzcGVlZCBidWZmcyAoYXJteSBtb2JpbGl0eSkKICBhcm1wdyA9IHsgc3BlZWQgPSAxMDUgfSwgICAgICAgIC0tIFBhd246IGZhc3RlciBwYXRyb2wKICBjb3JweXJvID0geyBzcGVlZCA9IDEwMCB9LCAgICAgIC0tIFB5cm86IHNsaWdodGx5IGZhc3RlcgogIGNvcmFrID0geyBzcGVlZCA9IDEwMCB9LCAgICAgICAgLS0gQUs6IHNsaWdodGx5IGZhc3RlcgogIGxlZ2luZmlsID0geyBzcGVlZCA9IDExMCB9LCAgICAgLS0gSW5maWx0cmF0b3I6IG1vYmlsZQoKICAtLSBUMSBWZWhpY2xlIHNwZWVkIGJ1ZmZzCiAgYXJtZmxhc2ggPSB7IHNwZWVkID0gMTE1IH0sICAgICAtLSBGbGFzaDogcmFpZCBzcGVlZAogIGNvcmdhdG9yID0geyBzcGVlZCA9IDEwOCB9LCAgICAgLS0gR2F0b3I6IGZhc3RlciBmbGFua3MKCiAgLS0gVDMgQm90IGhlYWx0aCBidWZmcyAoZmVlbCBpbXBhY3RmdWwpCiAgYXJtcmF6ID0geyBoZWFsdGggPSA3NTAwIH0sICAgICAtLSBSYXpvcmJhY2s6IHRhbmt5CiAgY29ya3JvZyA9IHsgaGVhbHRoID0gMTMwMDAgfSwgICAtLSBLcm9nb3RoOiBkdXJhYmxlIHRpdGFuCiAgbGVnY29tbWFuZG8gPSB7IGhlYWx0aCA9IDUwMDAgfSwtLSBDb21tYW5kbzogc3Vydml2YWJsZQoKICAtLSBUMyBWZWhpY2xlIGhlYWx0aCBidWZmcwogIGFybWJhbnRoID0geyBoZWFsdGggPSAxNDAwMCB9LCAgLS0gQmFudGhhOiBzaWVnZSB0YW5rCiAgY29yZ29sID0geyBoZWFsdGggPSA2MDAwIH0sICAgICAtLSBHb2xpYXRoOiBmcm9udGxpbmUKCiAgLS0gRXhwZXJpbWVudGFsIGNvc3QgYWRqdXN0bWVudHMKICBhcm1qdWdnID0geyBtZXRhbGNvc3QgPSAxMjAwMCB9LC0tIEp1Z2dlcm5hdXQ6IGFjY2Vzc2libGUKICBsZWdrZXJlcyA9IHsgbWV0YWxjb3N0ID0gODAwMCB9LC0tIEtlcmVzOiBhY2Nlc3NpYmxlCn0K
!bset tweakunits1 ewogIC0tIFQxIFJhcHRvciBzd2FybWVyczogZmFzdCBidXQgZnJhZ2lsZQogIHJhcHRvcl90MV9zd2FybWVyID0geyBzcGVlZCA9IDEyMCB9LAogIHJhcHRvcl90MV9zY291dCA9IHsgc3BlZWQgPSAxNDAgfSwKICByYXB0b3JfdDFfc3BpdHRlciA9IHsgc3BlZWQgPSA5MCB9LAoKICAtLSBUMiBSYXB0b3Igd2FycmlvcnM6IG1vZGVyYXRlIHNwZWVkIGFuZCBkYW1hZ2UKICByYXB0b3JfdDJfd2FycmlvciA9IHsgc3BlZWQgPSA4NSB9LAogIHJhcHRvcl90Ml9odW50ZXIgPSB7IHNwZWVkID0gOTUgfSwKICByYXB0b3JfdDJfcmFpZGVyID0geyBzcGVlZCA9IDExMCB9LAoKICAtLSBUMyBSYXB0b3IgYXNzYXVsdHM6IHNsb3cgYnV0IGRldmFzdGF0aW5nCiAgcmFwdG9yX3QzX2Fzc2F1bHQgPSB7IHNwZWVkID0gNjAgfSwKICByYXB0b3JfdDNfc3RhbGtlciA9IHsgc3BlZWQgPSA3MCB9LAogIHJhcHRvcl90M19kZW1vbGlzaGVyID0geyBzcGVlZCA9IDUwIH0sCgogIC0tIFQ0IFJhcHRvciBhcGV4OiB2ZXJ5IHNsb3csIGV4dHJlbWUgZGFtYWdlCiAgcmFwdG9yX3Q0X2FwZXggPSB7IHNwZWVkID0gNDAgfSwKICByYXB0b3JfdDRfYmVoZW1vdGggPSB7IHNwZWVkID0gMzUgfSwKfQo
